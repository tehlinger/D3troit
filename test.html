<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<head>
    <script src="https://d3js.org/d3.v4.min.js"></script>

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>
<!-- Color palette -->
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
</head>
<body>
  <div id='my_dataviz'></div>
<script>

  function main(data){
    let height = 300;
    let width = 600;
    const min = 0;
    let max = d3.max(data,x => x["Total"])
    let margin = 200;

    //Thanks https://www.d3-graph-gallery.com/graph/histogram_basic.html
    //Set up SVG
    var svg = d3.select("#my_dataviz")
    .append("svg")
    .attr("width", width)
    .attr("height", height)
    .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

    const xScale = d3.scaleLinear()
      .domain([0,max])
      .range([0,height]);

    const yScale = d3.scaleBand()
      .domain(data.map(d => d.Artist))
      .range([0,height])

    //d3.selectAll("div")
    //  .data(data)
    //.enter().append("div").text(function(d) { return d.Total + " "; })

    svg.selectAll("rect")
     .data(data)
     .enter()
     .append("rect")
       .attr("height", d => xScale(d.Total))
       .attr("width", d => 5)
       .attr("x", d => data.indexOf(d)*7)
       .attr("y", 0)
       .attr("transform", function(d) { return "translate(" + 0 + "," + (height - xScale(d.Total)).toString() + ")"; })
       .style("fill", "#69b3a2")
  }

  //Index,Artist,Total,Diff,Diversity
  //MAIN CALL HERE
  d3.csv("http://localhost:8000/sample.csv",main);

</script>

</body>
</html>
